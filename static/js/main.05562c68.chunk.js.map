{"version":3,"sources":["Frame.svg","App.js","index.js"],"names":["App","useState","isConnected","setIsConnected","userInfo","setUserInfo","useEffect","userData","JSON","parse","localStorage","getItem","checkConnectedWallet","onConnect","a","ABCProvider","provider","request","method","web3","Web3","eth","getAccounts","userAccount","getChainId","chainId","account","getBalance","ethBalance","utils","fromWei","saveUserInfo","length","console","log","balance","connectionid","window","setItem","stringify","className","src","imgfile","alt","style","fontWeight","onClick","removeItem","abc","href","target","rel","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qtBAAe,G,OAAA,IAA0B,mC,OCsI1BA,MA5Hf,WACE,MAAsCC,oBAAS,GAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAGAC,qBAAU,YACR,WACE,IAAMC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,gBACjC,MAAZJ,IACFF,EAAYE,GACZJ,GAAe,IAGnBS,KACC,IAEH,IAAMC,EAAS,uCAAG,sCAAAC,EAAA,+EAGSC,MAHT,YAGRC,EAHQ,yCAONA,EAASC,QAAQ,CAAEC,OAAQ,wBAPrB,cAUNC,EAAO,IAAIC,IAAKJ,GAVV,UAWcG,EAAKE,IAAIC,cAXvB,eAWNC,EAXM,iBAaUJ,EAAKE,IAAIG,aAbnB,eAaNC,EAbM,OAeNC,EAAUH,EAAY,GAfhB,UAiBWJ,EAAKE,IAAIM,WAAWD,GAjB/B,QAiBRE,EAjBQ,OAkBZA,EAAaT,EAAKU,MAAMC,QAAQF,EAAY,SAG5CG,EAAaH,EAAYF,EAASD,GACP,IAAvBF,EAAYS,QACdC,QAAQC,IAAI,qDAvBF,0DA2BdD,QAAQC,IACN,uRA5BY,0DAAH,qDAyCTH,EAAe,SAACH,EAAYF,EAASD,GACzC,IAAMF,EAAc,CAClBG,QAASA,EACTS,QAASP,EACTQ,aAAcX,GAEhBY,OAAO3B,aAAa4B,QAAQ,cAAe9B,KAAK+B,UAAUhB,IAC1D,IAAMhB,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,gBACjDN,EAAYE,GACZJ,GAAe,IAGjB,OACE,mCACE,sBAAKqC,UAAU,MAAf,UACE,qBAAKC,IAAKC,EAASC,IAAI,YACvB,sBAAKH,UAAU,cAAf,UACE,qBAAKA,UAAU,aAAf,SACE,qBAAII,MAAO,CAAEC,WAAY,UAAzB,cAAsC,2CAAtC,2BAEA3C,GACA,8BACE,wBAAQsC,UAAU,iBAAiBM,QAASjC,EAA5C,wCAOJX,GACE,qCACE,sBAAKsC,UAAU,eAAf,UACE,oBAAIA,UAAU,YAAd,SAA0B,8CAC1B,sBAAKA,UAAU,cAAf,UACE,+BAAM,oDACLpC,EAASsB,WAEZ,sBAAKc,UAAU,cAAf,UACE,+BAAM,6CACLpC,EAAS+B,WAEZ,sBAAKK,UAAU,cAAf,UACE,+BAAM,mDACLpC,EAASgC,mBAGd,8BACE,wBAAQI,UAAU,oBAAoBM,QAtD/B,WACnBT,OAAO3B,aAAaqC,WAAW,eAC/B1C,EAAY,IACZF,GAAe,IAmDH,8BAONkC,OAAOW,KACP,sBAAKR,UAAU,iBAAf,UACE,oBAAGA,UAAU,cAAb,0BAA8B,2CAA9B,qEACA,oBAAGA,UAAU,cAAb,2BACM,2CADN,UACyB,mBAAGS,KAAK,+FAA+FT,UAAU,YAAYU,OAAO,SAASC,IAAI,sBAAjJ,sBADzB,yCCxHZC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.05562c68.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Frame.e1369206.svg\";","/*****************************************/\n/* Detect the ABC Wallet Ethereum provider */\n/*****************************************/\n\nimport { useState, useEffect } from 'react';\nimport Web3 from 'web3';\nimport ABCProvider from 'abcwallet-extension-provider-api';\nimport \"./App.css\"\nimport imgfile from './Frame.svg';\n\nfunction App() {\n  const [isConnected, setIsConnected] = useState(false);\n  const [userInfo, setUserInfo] = useState({});\n\n  // check Connected Wallet\n  useEffect(() => {\n    function checkConnectedWallet() {\n      const userData = JSON.parse(localStorage.getItem('userAccount'));\n      if (userData != null) {\n        setUserInfo(userData);\n        setIsConnected(true);\n      }\n    }\n    checkConnectedWallet();\n  }, []);\n\n  const onConnect = async () => {\n    try {\n      // this returns the provider, or null if it wasn't detected\n      const provider = await ABCProvider();\n      if (provider) {\n\n        // web3 객체가 있으면 계정 정보를 가져 옵니다. Ethereum에 RPC 요청을 제출하는 데 사용 합니다.\n        await provider.request({ method: 'eth_requestAccounts' });\n\n        // http 에서 동작하는 node 에 연결하기 위해 HttpProvider 를 사용해 web3 객체를 생성 합니다.\n        const web3 = new Web3(provider);\n        const userAccount = await web3.eth.getAccounts();\n\n        const chainId = await web3.eth.getChainId();\n\n        const account = userAccount[0];\n\n        let ethBalance = await web3.eth.getBalance(account);  // 지갑 잔고를 가져옵니다.\n        ethBalance = web3.utils.fromWei(ethBalance, 'ether'); // 잔액을 Wei로 변환합니다.\n\n        // 유저 정보를 state에 저장합니다.\n        saveUserInfo(ethBalance, account, chainId);\n        if (userAccount.length === 0) {\n          console.log('ABC Wallet 과 연동 하세요');\n        }\n      }\n    } catch (err) {\n      console.log(\n        '계정을 가져오는 동안 오류가 발생했습니다. 이더리움 클라이언트가 올바르게 구성되었는지 확인하십시오.'\n      );\n    }\n  };\n\n  // 연동해지\n  const onDisconnect = () => {\n    window.localStorage.removeItem('userAccount');\n    setUserInfo({});\n    setIsConnected(false);\n  };\n\n  // 유저정보\n  const saveUserInfo = (ethBalance, account, chainId) => {\n    const userAccount = {\n      account: account,\n      balance: ethBalance,\n      connectionid: chainId,\n    };\n    window.localStorage.setItem('userAccount', JSON.stringify(userAccount)); //유지될 사용자 데이터\n    const userData = JSON.parse(localStorage.getItem('userAccount'));\n    setUserInfo(userData);\n    setIsConnected(true);\n  };\n\n  return (\n    <>\n      <div className=\"app\">\n        <img src={imgfile} alt=\"imgfile\" />\n        <div className=\"app-wrapper\">\n          <div className=\"app-header\">\n            <h1 style={{ fontWeight: 'normal' }}> <b>ABC Wallet</b> Provider API Demo</h1>\n          </div>\n          {!isConnected && (\n            <div>\n              <button className=\"connect-button\" onClick={onConnect}>\n                Connect to ABC Wallet\n              </button>\n            </div>\n          )}\n        </div>\n        {\n          isConnected && (\n            <>\n              <div className=\"data-wrapper\">\n                <h2 className='completed'><b>Completed !</b></h2>\n                <div className=\"app-details\">\n                  <span><b>Account number : </b></span>\n                  {userInfo.account}\n                </div>\n                <div className=\"app-details\">\n                  <span><b>Balance : </b></span>\n                  {userInfo.balance}\n                </div>\n                <div className=\"app-details\">\n                  <span><b>Connection ID : </b></span>\n                  {userInfo.connectionid}\n                </div>\n              </div>\n              <div>\n                <button className=\"disconnect-button\" onClick={onDisconnect}>\n                  Disconnect\n                </button>\n              </div>\n            </>\n          )\n        }\n        {!window.abc && (\n          <div className=\"button-wrapper\">\n            <p className='button-text'>아직 <b>ABC Wellet</b>을 설치하지 않으셨네요.</p>\n            <p className='button-text'>\n              지금  <b>ABC Wellet</b>을 <a href=\"https://chrome.google.com/webstore/detail/abc-wallet/mlhakagmgkmonhdonhkpjeebfphligng?hl=ko&\" className=\"underline\" target='_blank' rel=\"noopener noreferrer\" >Download</a> 받으세요!\n            </p>\n          </div>\n        )}\n      </div >\n    </>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}